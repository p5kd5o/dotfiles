#!/bin/env sh
## Configure the virtual console colors

init() {
  local -
  set -eu
  readonly USAGE="Usage: ${0##*/} file"
}



main() {
  init "$@"

  test "$#" -eq 1 && test -e "$1" || { printf '%s\n' "$USAGE"; exit 2; }

  if [ "${TERM}" = "linux" ]; then
    _SEDCMD='s/.*\*color\([0-9]\{1,\}\).*#\([0-9a-fA-F]\{6\}\).*/\1 \2/p'
    for i in $(sed -n "$_SEDCMD" "$1" \
      | awk '$1 < 16 {printf "\\e]P%X%s", $1m, $2}'); do
        echo -en "$i"
    done
    clear
  fi
}

main "$@"
